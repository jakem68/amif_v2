#!/bin/bash
xset s noblank
xset s off
xset -dpms

unclutter -idle 0.5 -root &

tb_sites="http://demo.thingsboard.io/dashboard/3535fed0-64da-11e9-bbf6-b1f99ee9f749?publicId=01b2c370-6cd4-11e9-bbf6-b1f99ee9f749"
tb_sites_die2="http://demo.thingsboard.io/dashboard/3535fed0-64da-11e9-bbf6-b1f99ee9f749?publicId=01b2c370-6cd4-11e9-bbf6-b1f99ee9f749&state=W3siaWQiOiJkZWZhdWx0IiwicGFyYW1zIjp7fX0seyJpZCI6IlNpdGVfc3RhdHVzIiwicGFyYW1zIjp7ImVudGl0eUlkIjp7ImlkIjoiOTQ4ODA1MTAtNjRkMy0xMWU5LTlhYmMtMGI4OTc1MGM5ZjFjIiwiZW50aXR5VHlwZSI6IkFTU0VUIn0sImVudGl0eU5hbWUiOiJEaWVwZW5iZWVrIDIifX1d"
tb_sites_die2_klima1="http://demo.thingsboard.io/dashboard/3535fed0-64da-11e9-bbf6-b1f99ee9f749?publicId=01b2c370-6cd4-11e9-bbf6-b1f99ee9f749&state=W3siaWQiOiJkZWZhdWx0IiwicGFyYW1zIjp7fX0seyJpZCI6IlNpdGVfc3RhdHVzIiwicGFyYW1zIjp7ImVudGl0eUlkIjp7ImlkIjoiOTQ4ODA1MTAtNjRkMy0xMWU5LTlhYmMtMGI4OTc1MGM5ZjFjIiwiZW50aXR5VHlwZSI6IkFTU0VUIn0sImVudGl0eU5hbWUiOiJEaWVwZW5iZWVrIDIifX0seyJpZCI6InRlbXBlcmF0dXJlX3N0YXRlIiwicGFyYW1zIjp7ImVudGl0eUlkIjp7ImlkIjoiNjY0OWJmOTEtNmMzMC0xMWU5LTlhYmMtMGI4OTc1MGM5ZjFjIiwiZW50aXR5VHlwZSI6IkRFVklDRSJ9LCJlbnRpdHlOYW1lIjoiRGllMl9rbGltYTFfdGhlcm1vbWV0ZXIifX1d"
tb_sites_die2_klima2="http://demo.thingsboard.io/dashboard/3535fed0-64da-11e9-bbf6-b1f99ee9f749?publicId=01b2c370-6cd4-11e9-bbf6-b1f99ee9f749&state=W3siaWQiOiJkZWZhdWx0IiwicGFyYW1zIjp7fX0seyJpZCI6IlNpdGVfc3RhdHVzIiwicGFyYW1zIjp7ImVudGl0eUlkIjp7ImlkIjoiOTQ4ODA1MTAtNjRkMy0xMWU5LTlhYmMtMGI4OTc1MGM5ZjFjIiwiZW50aXR5VHlwZSI6IkFTU0VUIn0sImVudGl0eU5hbWUiOiJEaWVwZW5iZWVrIDIifX0seyJpZCI6InRlbXBlcmF0dXJlX3N0YXRlIiwicGFyYW1zIjp7ImVudGl0eUlkIjp7ImlkIjoiNWVmZmZhNzAtNmM0OC0xMWU5LWJiZjYtYjFmOTllZTlmNzQ5IiwiZW50aXR5VHlwZSI6IkRFVklDRSJ9LCJlbnRpdHlOYW1lIjoiRGllMl9rbGltYTJfdGhlcm1vbWV0ZXIifX1d"
tb_sites_die2_oven="http://demo.thingsboard.io/dashboard/3535fed0-64da-11e9-bbf6-b1f99ee9f749?publicId=01b2c370-6cd4-11e9-bbf6-b1f99ee9f749&state=W3siaWQiOiJkZWZhdWx0IiwicGFyYW1zIjp7fX0seyJpZCI6IlNpdGVfc3RhdHVzIiwicGFyYW1zIjp7ImVudGl0eUlkIjp7ImlkIjoiOTQ4ODA1MTAtNjRkMy0xMWU5LTlhYmMtMGI4OTc1MGM5ZjFjIiwiZW50aXR5VHlwZSI6IkFTU0VUIn0sImVudGl0eU5hbWUiOiJEaWVwZW5iZWVrIDIifX0seyJpZCI6ImhpZ2hfdGVtcGVyYXR1cmVfc3RhdGUiLCJwYXJhbXMiOnsiZW50aXR5SWQiOnsiaWQiOiI5ZTY4YjhjMC02MDg5LTExZTktYTczMy0xZjE1NDU2ZWFkZDUiLCJlbnRpdHlUeXBlIjoiREVWSUNFIn0sImVudGl0eU5hbWUiOiJEaWUyX292ZW5fdGhlcm1vbWV0ZXIifX1d"
tb_sites_die2_lasea="http://demo.thingsboard.io/dashboard/3535fed0-64da-11e9-bbf6-b1f99ee9f749?publicId=01b2c370-6cd4-11e9-bbf6-b1f99ee9f749&state=W3siaWQiOiJkZWZhdWx0IiwicGFyYW1zIjp7fX0seyJpZCI6IlNpdGVfc3RhdHVzIiwicGFyYW1zIjp7ImVudGl0eUlkIjp7ImlkIjoiOTQ4ODA1MTAtNjRkMy0xMWU5LTlhYmMtMGI4OTc1MGM5ZjFjIiwiZW50aXR5VHlwZSI6IkFTU0VUIn0sImVudGl0eU5hbWUiOiJEaWVwZW5iZWVrIDIifX0seyJpZCI6InN0YWNrbGlnaHRfc3RhdGUiLCJwYXJhbXMiOnsiZW50aXR5SWQiOnsiaWQiOiI0M2Q1ZmQwMC02NzliLTExZTktYmJmNi1iMWY5OWVlOWY3NDkiLCJlbnRpdHlUeXBlIjoiREVWSUNFIn0sImVudGl0eU5hbWUiOiJEaWUyX2xhc2VhX3NsbSJ9fV0%3D"
tb_sites_kortrijk="http://demo.thingsboard.io/dashboard/3535fed0-64da-11e9-bbf6-b1f99ee9f749?publicId=01b2c370-6cd4-11e9-bbf6-b1f99ee9f749&state=W3siaWQiOiJkZWZhdWx0IiwicGFyYW1zIjp7fX0seyJpZCI6IlNpdGVfc3RhdHVzIiwicGFyYW1zIjp7ImVudGl0eUlkIjp7ImlkIjoiNDA5NDFjNDAtNjRkOS0xMWU5LWJiZjYtYjFmOTllZTlmNzQ5IiwiZW50aXR5VHlwZSI6IkFTU0VUIn0sImVudGl0eU5hbWUiOiJLb3J0cmlqayJ9fV0%3D"
tb_sites_kortrijk_slm="http://demo.thingsboard.io/dashboard/3535fed0-64da-11e9-bbf6-b1f99ee9f749?publicId=01b2c370-6cd4-11e9-bbf6-b1f99ee9f749&state=W3siaWQiOiJkZWZhdWx0IiwicGFyYW1zIjp7fX0seyJpZCI6IlNpdGVfc3RhdHVzIiwicGFyYW1zIjp7ImVudGl0eUlkIjp7ImlkIjoiNDA5NDFjNDAtNjRkOS0xMWU5LWJiZjYtYjFmOTllZTlmNzQ5IiwiZW50aXR5VHlwZSI6IkFTU0VUIn0sImVudGl0eU5hbWUiOiJLb3J0cmlqayJ9fSx7ImlkIjoic3RhY2tsaWdodF9zdGF0ZSIsInBhcmFtcyI6eyJlbnRpdHlJZCI6eyJpZCI6IjY2ZTYwNTEwLTgwYjQtMTFlOS05MjMyLTk5NzUzODQwY2U0MyIsImVudGl0eVR5cGUiOiJERVZJQ0UifSwiZW50aXR5TmFtZSI6IktvcnRyaWprX1Nhd3llcl9zbG0ifX1d"
tb_sites_luik="http://demo.thingsboard.io/dashboard/3535fed0-64da-11e9-bbf6-b1f99ee9f749?publicId=01b2c370-6cd4-11e9-bbf6-b1f99ee9f749&state=W3siaWQiOiJkZWZhdWx0IiwicGFyYW1zIjp7fX0seyJpZCI6IlNpdGVfc3RhdHVzIiwicGFyYW1zIjp7ImVudGl0eUlkIjp7ImlkIjoiNmM3ODE5OTAtNzljMS0xMWU5LTgwNDAtZGQ5NGU3YjQ0ZDQ1IiwiZW50aXR5VHlwZSI6IkFTU0VUIn0sImVudGl0eU5hbWUiOiJMacOoZ2UifX1d"
tb_sites_luik_slm="http://demo.thingsboard.io/dashboard/3535fed0-64da-11e9-bbf6-b1f99ee9f749?publicId=01b2c370-6cd4-11e9-bbf6-b1f99ee9f749&state=W3siaWQiOiJkZWZhdWx0IiwicGFyYW1zIjp7fX0seyJpZCI6IlNpdGVfc3RhdHVzIiwicGFyYW1zIjp7ImVudGl0eUlkIjp7ImlkIjoiNmM3ODE5OTAtNzljMS0xMWU5LTgwNDAtZGQ5NGU3YjQ0ZDQ1IiwiZW50aXR5VHlwZSI6IkFTU0VUIn0sImVudGl0eU5hbWUiOiJMacOoZ2UifX0seyJpZCI6InN0YWNrbGlnaHRfc3RhdGUiLCJwYXJhbXMiOnsiZW50aXR5SWQiOnsiaWQiOiI3OWE3MzJhMS04MGI0LTExZTktYTBkNC03NzdjYzg0MzI5ZTgiLCJlbnRpdHlUeXBlIjoiREVWSUNFIn0sImVudGl0eU5hbWUiOiJMdWlrXzNEUF9zbG0ifX1d"


sed -i 's/"exited_cleanly":false/"exited_cleanly":true/' /home/pi/.config/chromium/Default/Preferences
sed -i 's/"exit_type":"Crashed"/"exit_type":"Normal"/' /home/pi/.config/chromium/Default/Preferences

while true; do
   counter=0

   /usr/bin/chromium-browser --noerrdialogs --disable-infobars --kiosk $tb_sites $tb_sites_die2 $tb_sites_die2_klima1 $tb_sites_die2_klima2 $tb_sites_die2_oven $tb_sites_die2_lasea $tb_sites_kortrijk $tb_sites_kortrijk_slm $tb_sites_luik $tb_sites_luik_slm &

   while [ $counter -le 200 ]
   do
      ((counter++))
      xdotool keydown ctrl+Tab; xdotool keyup ctrl+Tab;
      sleep 10
   done
   xdotool key Alt+F4
   sleep 1

done


